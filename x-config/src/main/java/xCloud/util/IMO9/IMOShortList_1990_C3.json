{
  "nl_statement": "9. II3 (CUB 3) Let $x, y, z$ be real numbers each of whose absolute value is different from $1 /\n\\sqrt{3}$ such that $x+y+z=x y z$ . Prove that\\n$$\\n\\frac{3 x-x^{3}} {1-3 x^{2}}+\\frac{3 y\u0002y^{3}} {1-3 y^{2}}+\\frac{3 z-z^{3}} {1-3 z^{2}}=\\frac{3 x-x^{3}} {1-3 x^{2}} \\cdot\\frac{3 y\u0002y^{3}} {1-3 y^{2}} \\cdot\\frac{3 z-z^{3}} {1-3 z^{2}}.\\n$$\\n",
  "nl_proof": "\\documentclass{article}\n\\usepackage{amsmath, amssymb}\n\n% Comprehensive preamble for compatibility with PDFLaTeX\n\\begin{document}\n\n\\section*{Proof of IMO 1990 Shortlist Problem C3}\n\nLet \\(x, y, z\\) be real numbers such that \\(|x|, |y|, |z| \\neq \\frac{1}{\\sqrt{3}}\\) and \\(x + y + z = xyz\\). We aim to prove that:\n\\[\n\\frac{3x - x^3}{1 - 3x^2} + \\frac{3y - y^3}{1 - 3y^2} + \\frac{3z - z^3}{1 - 3z^2} = \\frac{3x - x^3}{1 - 3x^2} \\cdot \\frac{3y - y^3}{1 - 3y^2} \\cdot \\frac{3z - z^3}{1 - 3z^2}.\n\\]\n\n% Step 1: Define the function\n\\subsection*{Step 1: Define the Function}\nDefine the function:\n\\[\nf(t) = \\frac{3t - t^3}{1 - 3t^2}.\n\\]\nThe goal is to show:\n\\[\nf(x) + f(y) + f(z) = f(x) \\cdot f(y) \\cdot f(z).\n\\]\nSince \\(|t| \\neq \\frac{1}{\\sqrt{3}}\\), the denominator \\(1 - 3t^2 \\neq 0\\), as \\(3t^2 = 1\\) implies \\(t^2 = \\frac{1}{3}\\).\n\n% Step 2: Trigonometric substitution\n\\subsection*{Step 2: Trigonometric Substitution}\nGiven \\(x + y + z = xyz\\), let:\n\\[\nx = \\tan A, \\quad y = \\tan B, \\quad z = \\tan C,\n\\]\nwhere \\(A, B, C \\neq \\pm \\frac{\\pi}{6} + k\\pi\\) (since \\(|\\tan \\theta| = \\frac{1}{\\sqrt{3}}\\) when \\(\\theta = \\pm \\frac{\\pi}{6} + k\\pi\\)). The condition becomes:\n\\[\n\\tan A + \\tan B + \\tan C = \\tan A \\tan B \\tan C.\n\\]\nLet \\(s = \\tan A + \\tan B + \\tan C = \\tan A \\tan B \\tan C\\). Using the tangent addition formula for three angles:\n\\[\n\\tan(A + B + C) = \\frac{\\tan A + \\tan B + \\tan C - \\tan A \\tan B \\tan C}{1 - (\\tan A \\tan B + \\tan B \\tan C + \\tan C \\tan A)}.\n\\]\nSubstituting \\(s\\), the numerator becomes \\(s - s = 0\\), so:\n\\[\n\\tan(A + B + C) = 0 \\implies A + B + C = n\\pi \\quad \\text{for some integer } n.\n\\]\n\n% Step 3: Evaluate f(t)\n\\subsection*{Step 3: Evaluate \\(f(t)\\)}\nCompute \\(f(t)\\):\n\\[\n3t - t^3 = t (3 - t^2), \\quad 1 - 3t^2 = -(3t^2 - 1) = -3 \\left(t^2 - \\frac{1}{3}\\right).\n\\]\nThus:\n\\[\nf(t) = \\frac{t (3 - t^2)}{-3 \\left(t^2 - \\frac{1}{3}\\right)} = -\\frac{t (3 - t^2)}{3 \\left(t^2 - \\frac{1}{3}\\right)}.\n\\]\nFor \\(t = \\tan \\theta\\), use the triple-angle formula for tangent:\n\\[\n\\tan 3\\theta = \\frac{3 \\tan \\theta - \\tan^3 \\theta}{1 - 3 \\tan^2 \\theta}.\n\\]\nComparing with \\(f(t)\\), we have:\n\\[\nf(\\tan \\theta) = \\tan 3\\theta.\n\\]\nThus:\n\\[\nf(x) = f(\\tan A) = \\tan 3A, \\quad f(y) = \\tan 3B, \\quad f(z) = \\tan 3C.\n\\]\n\n% Step 4: Verify the equality\n\\subsection*{Step 4: Verify the Equality}\nThe left-hand side is:\n\\[\nf(x) + f(y) + f(z) = \\tan 3A + \\tan 3B + \\tan 3C.\n\\]\nSince \\(A + B + C = n\\pi\\), we have:\n\\[\n3A + 3B + 3C = 3n\\pi \\implies \\tan(3A + 3B + 3C) = \\tan(3n\\pi) = 0.\n\\]\nApply the tangent addition formula for \\(3A + 3B + 3C\\):\n\\[\n\\tan(3A + 3B + 3C) = \\frac{\\tan 3A + \\tan 3B + \\tan 3C - \\tan 3A \\tan 3B \\tan 3C}{1 - (\\tan 3A \\tan 3B + \\tan 3B \\tan 3C + \\tan 3C \\tan 3A)} = 0.\n\\]\nThis implies the numerator is zero:\n\\[\n\\tan 3A + \\tan 3B + \\tan 3C = \\tan 3A \\tan 3B \\tan 3C.\n\\]\nThus:\n\\[\nf(x) + f(y) + f(z) = f(x) \\cdot f(y) \\cdot f(z).\n\\]\n\n% Step 5: Address the condition\n\\subsection*{Step 5: Condition Verification}\nThe condition \\(|x|, |y|, |z| \\neq \\frac{1}{\\sqrt{3}}\\) ensures \\(1 - 3x^2 \\neq 0\\), making \\(f(x)\\) well-defined. The trigonometric substitution assumes \\(3A, 3B, 3C \\neq \\frac{\\pi}{2} + m\\pi\\), which is consistent with the problem’s constraints.\n\n% Conclusion\n\\subsection*{Conclusion}\nTherefore:\n\\[\n\\frac{3x - x^3}{1 - 3x^2} + \\frac{3y - y^3}{1 - 3y^2} + \\frac{3z - z^3}{1 - 3z^2} = \\frac{3x - x^3}{1 - 3x^2} \\cdot \\frac{3y - y^3}{1 - 3y^2} \\cdot \\frac{3z - z^3}{1 - 3z^2}.\n\\]\nThis completes the proof.\n\n\\end{document}",
  "statement": "import Mathlib.Analysis.SpecialFunctions.Trigonometric.Basic\nimport Mathlib.Analysis.SpecialFunctions.Trigonometric.Arctan\n\nopen Real\n\n-- Theorem for IMO 1990 Shortlist Problem C3\ntheorem imo_1990_shl_c3 (x y z : ℝ)\n  (hcond : x + y + z = x * y * z) -- Condition: x + y + z = xyz\n  (hx : |x| ≠ 1 / sqrt 3) (hy : |y| ≠ 1 / sqrt 3) (hz : |z| ≠ 1 / sqrt 3) : -- |x|, |y|, |z| ≠ 1/√3\n  let f := fun t => (3 * t - t ^ 3) / (1 - 3 * t ^ 2); -- Define f(t) = (3t - t^3)/(1 - 3t^2)\n  f x + f y + f z = f x * f y * f z := by\n  -- Define the function f\n  set f := fun t => (3 * t - t ^ 3) / (1 - 3 * t ^ 2)\n  -- Use trigonometric substitution: x = tan A, y = tan B, z = tan C\n  obtain ⟨A, hA⟩ : ∃ A, x = tan A := ⟨arctan x, arctan_tan x⟩\n  obtain ⟨B, hB⟩ : ∃ B, y = tan B := ⟨arctan y, arctan_tan y⟩\n  obtain ⟨C, hC⟩ : ∃ C, z = tan C := ⟨arctan z, arctan_tan z⟩\n  -- Substitute into the condition x + y + z = xyz\n  have h_tan : tan A + tan B + tan C = tan A * tan B * tan C := by\n    rw [hA, hB, hC] at hcond\n    exact hcond\n  -- Show A + B + C = nπ using the tangent addition formula\n  have h_angle : ∃ n : ℤ, A + B + C = n * π := by\n    let s := tan A + tan B + tan C\n    have : s = tan A * tan B * tan C := h_tan\n    have : tan (A + B + C) = (tan A + tan B + tan C - tan A * tan B * tan C) /\n      (1 - (tan A * tan B + tan B * tan C + tan C * tan A)) := tan_add_add (by {\n        intro h\n        have : tan A * tan B * tan C = 1 - (tan A * tan B + tan B * tan C + tan C * tan A) := by\n          rw [← tan_add_add, h, tan_zero]\n        linarith [h_tan]\n      })\n    rw [this, h_tan]\n    simp only [sub_self, zero_div]\n    exact tan_eq_zero_iff.mp\n  -- Compute f(tan θ) = tan 3θ\n  have h_f_tan : ∀ θ, (1 - 3 * (tan θ) ^ 2 ≠ 0) → f (tan θ) = tan (3 * θ) := by\n    intro θ h_den\n    have h_den' : 1 - 3 * tan θ ^ 2 ≠ 0 := h_den\n    unfold f\n    rw [← tan_three_mul]\n    field_simp [h_den']\n    ring\n  -- Apply the condition |x| ≠ 1/√3 to ensure denominators are non-zero\n  have h_den_x : 1 - 3 * x ^ 2 ≠ 0 := by\n    intro h\n    have : 3 * x ^ 2 = 1 := by linarith\n    have : x ^ 2 = 1 / 3 := by linarith\n    have : |x| = 1 / sqrt 3 := by\n      rw [abs_eq_sqrt_sq x]\n      exact sqrt_div_of_nonneg (by norm_num) (by norm_num)\n    contradiction\n  have h_den_y : 1 - 3 * y ^ 2 ≠ 0 := by\n    intro h\n    have : 3 * y ^ 2 = 1 := by linarith\n    have : y ^ 2 = 1 / 3 := by linarith\n    have : |y| = 1 / sqrt 3 := by\n      rw [abs_eq_sqrt_sq y]\n      exact sqrt_div_of_nonneg (by norm_num) (by norm_num)\n    contradiction\n  have h_den_z : 1 - 3 * z ^ 2 ≠ 0 := by\n    intro h\n    have : 3 * z ^ 2 = 1 := by linarith\n    have : z ^ 2 = 1 / 3 := by linarith\n    have : |z| = 1 / sqrt 3 := by\n      rw [abs_eq_sqrt_sq z]\n      exact sqrt_div_of_nonneg (by norm_num) (by norm_num)\n    contradiction\n  -- Evaluate f(x), f(y), f(z)\n  have h_fx : f x = tan (3 * A) := by\n    rw [hA]\n    exact h_f_tan A h_den_x\n  have h_fy : f y = tan (3 * B) := by\n    rw [hB]\n    exact h_f_tan B h_den_y\n  have h_fz : f z = tan (3 * C) := by\n    rw [hC]\n    exact h_f_tan C h_den_z\n  -- Left-hand side\n  have h_left : f x + f y + f z = tan (3 * A) + tan (3 * B) + tan (3 * C) := by\n    rw [h_fx, h_fy, h_fz]\n  -- Right-hand side\n  have h_right : f x * f y * f z = tan (3 * A) * tan (3 * B) * tan (3 * C) := by\n    rw [h_fx, h_fy, h_fz]\n  -- Use A + B + C = nπ\n  obtain ⟨n, h_abc⟩ : ∃ n : ℤ, A + B + C = n * π := h_angle\n  have : 3 * A + 3 * B + 3 * C = 3 * n * π := by\n    rw [h_abc]\n    ring\n  have h_tan_sum : tan (3 * A + 3 * B + 3 * C) = 0 := by\n    rw [this]\n    exact tan_int_mul_pi 3 n\n  -- Apply the tangent addition formula for three angles\n  have h_tan_eq : tan (3 * A + 3 * B + 3 * C) = (tan (3 * A) + tan (3 * B) + tan (3 * C) - tan (3 * A) * tan (3 * B) * tan (3 * C)) /\n    (1 - (tan (3 * A) * tan (3 * B) + tan (3 * B) * tan (3 * C) + tan (3 * C) * tan (3 * A))) := tan_add_add (by {\n      intro h\n      have : tan (3 * A) * tan (3 * B) * tan (3 * C) = 1 - (tan (3 * A) * tan (3 * B) + tan (3 * B) * tan (3 * C) + tan (3 * C) * tan (3 * A)) := by\n        rw [← tan_add_add, h, tan_zero]\n      linarith\n    })\n  -- Since tan (3A + 3B + 3C) = 0, the numerator is zero\n  have : tan (3 * A) + tan (3 * B) + tan (3 * C) = tan (3 * A) * tan (3 * B) * tan (3 * C) := by\n    rw [h_tan_eq] at h_tan_sum\n    exact eq_of_sub_eq_zero h_tan_sum\n  -- Conclude the proof\n  rw [h_left, h_right, this]",
  "lean_version": [
    "v4.20.0",
    "commit_809c3fb3b5c8f5d7dace56e200b426187516535a"
  ],
  "source": "IMOShortList_1990_C3"
}




