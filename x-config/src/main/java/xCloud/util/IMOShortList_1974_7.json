{
  "nl_statement": "7. II 1 (POL 2) Let $a_{i}, b_{i}$ be coprime positive integers for $i=1, 2, \\ldots, k,$ . and $m$ the least common multiple of $b_{1}, \\ldots, b_{k}$ . Prove that the greatest common divisor of $a_{1} \\frac{m} {b_{1}}, \\dots, a_{k} \\frac{m} {b_{k}}$ equals the greatest common divisor of $a_{1}, \\ldots, a_{k}$ .\n",
  "nl_proof": "\\documentclass{article}\n\\usepackage{amsmath, amssymb}\n\n% Setting up the document with a comprehensive preamble\n\\begin{document}\n\n\\section*{Proof of IMO 1974 Shortlist Problem 7}\n\nLet \\(a_i, b_i\\) (for \\(i = 1, 2, \\dots, k\\)) be positive integers such that \\(\\gcd(a_i, b_i) = 1\\) for each \\(i\\), and let \\(m = \\lcm(b_1, \\dots, b_k)\\). We aim to prove that:\n\\[\n\\gcd\\left(a_1 \\frac{m}{b_1}, \\dots, a_k \\frac{m}{b_k}\\right) = \\gcd(a_1, \\dots, a_k).\n\\]\n\n% Defining the gcds for clarity\nLet \\(g = \\gcd(a_1, \\dots, a_k)\\) and \\(h = \\gcd\\left(a_1 \\frac{m}{b_1}, \\dots, a_k \\frac{m}{b_k}\\right)\\). Since \\(b_i \\mid m\\) (as \\(m\\) is the least common multiple), each \\(\\frac{m}{b_i}\\) is a positive integer. We prove \\(g = h\\) by showing that \\(g \\mid h\\) and \\(h \\mid g\\).\n\n% Step 1: Proving g divides h\n\\subsection*{Step 1: \\(g \\mid h\\)}\nSuppose \\(d\\) is a common divisor of \\(a_1, \\dots, a_k\\), so \\(d \\mid a_i\\) for all \\(i\\). For each term \\(a_i \\frac{m}{b_i}\\), write \\(a_i = d \\cdot a_i'\\) for some integer \\(a_i'\\). Then:\n\\[\na_i \\frac{m}{b_i} = (d \\cdot a_i') \\frac{m}{b_i} = d \\cdot \\left(a_i' \\frac{m}{b_i}\\right).\n\\]\nSince \\(\\frac{m}{b_i}\\) is an integer, \\(a_i' \\frac{m}{b_i}\\) is an integer, so \\(d \\mid a_i \\frac{m}{b_i}\\) for all \\(i\\). Thus, \\(d\\) is a common divisor of \\(a_1 \\frac{m}{b_1}, \\dots, a_k \\frac{m}{b_k}\\), implying \\(d \\mid h\\). Since \\(g = \\gcd(a_1, \\dots, a_k)\\) is the greatest such divisor, we have:\n\\[\ng \\mid h.\n\\]\n\n% Step 2: Proving h divides g\n\\subsection*{Step 2: \\(h \\mid g\\)}\nSuppose \\(d\\) is a common divisor of \\(a_1 \\frac{m}{b_1}, \\dots, a_k \\frac{m}{b_k}\\), so \\(d \\mid a_i \\frac{m}{b_i}\\) for all \\(i\\). For each \\(i\\), there exists an integer \\(c_i\\) such that:\n\\[\na_i \\frac{m}{b_i} = d \\cdot c_i \\implies a_i \\cdot m = d \\cdot c_i \\cdot b_i.\n\\]\nSince \\(\\gcd(a_i, b_i) = 1\\), we need to show \\(d \\mid a_i\\). Let \\(p\\) be a prime dividing \\(d\\), so \\(p \\mid a_i \\frac{m}{b_i} = a_i \\cdot \\frac{m}{b_i}\\). Write \\(m = b_i \\cdot m_i\\), where \\(m_i = \\frac{m}{b_i}\\), so:\n\\[\na_i \\frac{m}{b_i} = a_i \\cdot m_i.\n\\]\nThus, \\(p \\mid a_i m_i\\). Since \\(\\gcd(a_i, b_i) = 1\\), if \\(p \\mid b_i\\), then \\(p \\nmid a_i\\). Also, \\(p \\mid m = b_i \\cdot m_i\\) implies \\(p \\nmid m_i\\) (as \\(m_i = \\frac{m}{b_i}\\) is coprime to \\(b_i\\)). If \\(p \\mid a_i m_i\\) and \\(p \\nmid m_i\\), then \\(p \\mid a_i\\). If \\(p \\nmid b_i\\) for all \\(i\\), then \\(p \\nmid m\\), so \\(p \\nmid m_i\\), and again \\(p \\mid a_i\\). Hence, every prime \\(p \\mid d\\) divides \\(a_i\\) for all \\(i\\), so:\n\\[\nd \\mid a_i \\text{ for all } i.\n\\]\nThus, \\(d \\mid \\gcd(a_1, \\dots, a_k) = g\\). Since \\(h\\) is the greatest common divisor, we have:\n\\[\nh \\mid g.\n\\]\n\n% Conclusion\n\\subsection*{Conclusion}\nSince \\(g \\mid h\\) and \\(h \\mid g\\), and both are positive integers, it follows that \\(g = h\\). Therefore:\n\\[\n\\gcd\\left(a_1 \\frac{m}{b_1}, \\dots, a_k \\frac{m}{b_k}\\right) = \\gcd(a_1, \\dots, a_k).\n\\]\nThis completes the proof.\n\n\\end{document}",
  "statement": "import Mathlib\n\n-- Theorem for IMO 1974 Shortlist Problem 7\ntheorem imo_1974_shl_7 {k : ℕ} (hk : k ≠ 0) (a b : Fin k → ℕ)\n  (hpos : ∀ i, b i ≠ 0) -- b_i are positive integers\n  (hcoprime : ∀ i, Nat.Coprime (a i) (b i)) : -- a_i, b_i are coprime\n  let m := (Finset.univ : Finset (Fin k)).lcm b; -- m is the lcm of b_i\n  (Finset.univ : Finset (Fin k)).gcd (fun i => a i * m / b i) = Finset.univ.gcd a := by\n  -- Define m as the lcm of b_i\n  set m := (Finset.univ : Finset (Fin k)).lcm b\n  -- Define the two gcds\n  let left_gcd := (Finset.univ : Finset (Fin k)).gcd (fun i => a i * m / b i)\n  let right_gcd := Finset.univ.gcd a\n  -- Prove the gcds are equal by showing they divide each other\n  apply Nat.dvd_antisymm\n  -- Part 1: right_gcd divides left_gcd\n  { apply Finset.gcd_dvd\n    intro i hi\n    -- right_gcd divides each a_i\n    have h_dvd_ai : right_gcd ∣ a i := Finset.dvd_gcd hi\n    -- Rewrite a_i * m / b_i\n    have h_div : b i ∣ m := Finset.dvd_lcm hi\n    have h_term : a i * m / b i = a i * (m / b i) := by\n      rw [← Nat.mul_div_assoc a h_div]\n    rw [h_term]\n    -- right_gcd divides a_i * (m / b_i)\n    exact dvd_mul_of_dvd_left h_dvd_ai _ }\n  -- Part 2: left_gcd divides right_gcd\n  { apply Finset.gcd_dvd\n    intro i hi\n    -- left_gcd divides each a_i * m / b_i\n    have h_dvd_term : left_gcd ∣ a i * m / b i := Finset.dvd_gcd hi\n    -- Since gcd(a_i, b_i) = 1, prove left_gcd divides a_i\n    have h_div : b i ∣ m := Finset.dvd_lcm hi\n    have h_coprime : Nat.Coprime (a i) (b i) := hcoprime i\n    -- Rewrite a_i * m / b_i\n    have h_term : a i * m / b i = a i * (m / b i) := by\n      rw [← Nat.mul_div_assoc a h_div]\n    rw [h_term] at h_dvd_term\n    -- left_gcd divides a_i * (m / b_i), need to show it divides a_i\n    have h_coprime_m_div_bi : Nat.Coprime (a i) (m / b i) := by\n      apply Nat.coprime_of_dvd' h_coprime\n      intro p hp h_dvd_m_div_bi h_dvd_bi\n      have h_dvd_m : p ∣ m := by\n        rw [Nat.div_mul_cancel h_div] at h_dvd_m_div_bi\n        exact h_dvd_m_div_bi\n      have h_dvd_some_bj : ∃ j, p ∣ b j := by\n        exact Nat.dvd_lcm_iff.mp h_dvd_m hi\n      obtain ⟨j, h_dvd_bj⟩ : ∃ j, p ∣ b j := h_dvd_some_bj\n      have h_not_dvd_ai : ¬ p ∣ a i := by\n        intro h_dvd_ai\n        have h_gcd_ai_bi : p ∣ Nat.gcd (a i) (b i) := Nat.dvd_gcd h_dvd_ai h_dvd_bi\n        rw [h_coprime] at h_gcd_ai_bi\n        exact hp (Nat.dvd_one.mp h_gcd_ai_bi)\n      exact h_not_dvd_ai h_dvd_m_div_bi\n    exact Nat.coprime.dvd_of_dvd_mul_right h_coprime_m_div_bi h_dvd_term }",
  "lean_version": [
    "v4.20.0",
    "commit_809c3fb3b5c8f5d7dace56e200b426187516535a"
  ],
  "source": "IMOShortList_1974_7"
}